const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/js/FocusModeInsightsApp-Da48LGTy.js","assets/js/icon-alert-BG5stABd.js","assets/js/localStorage-BWL8dYsz.js","assets/js/preload-helper-DmNsytk6.js","assets/js/string-VUUyAM1F.js","assets/js/AppPopup-CbSnHHuS.js","assets/js/globalKeyEventManager-DnrWxalE.js","assets/css/AppPopup-GUOHU7lV.css","assets/js/AppViewSwitchDynamic-BnnyVzZe.js","assets/js/SmoothReflow-C4xMRPDz.js","assets/js/allComponentsMounted-C3UsG_cA.js","assets/css/SmoothReflow-DiGQ1RDg.css","assets/js/AppView-BxMN5ybG.js","assets/css/AppView-CN0ZToq1.css","assets/css/AppViewSwitchDynamic-BrdO2Yfv.css","assets/js/BaseDropdown-Dr1kQxZe.js","assets/js/BaseDropdownContent-CObS9Nk4.js","assets/js/constants-CALDQiUE.js","assets/js/index-zUX2uO7y.js","assets/css/BaseDropdownContent-BzU7S1Vc.css","assets/js/portal-vue.esm-CE661Bdg.js","assets/js/icon-ellipsis-D3jS4u3x.js","assets/css/BaseDropdown-DOOXxvW0.css","assets/js/AppHeader-DObzZgoX.js","assets/js/AppHeaderControl-BO2-YKTw.js","assets/css/AppHeaderControl-C6b_K81h.css","assets/js/icon-hide-NFfBhfBx.js","assets/css/AppHeader-CXINzJ-M.css","assets/js/BaseIcon-Cgk50uj8.js","assets/js/arrow-Be8MuPJi.js","assets/js/icon-weather-reset-C06kxk3l.js","assets/js/icon-settings-Bycjf8-G.js","assets/js/icon-back-arrow-CiRQJ6G-.js","assets/js/icon-back-D_TFrgyJ.js","assets/js/icon-trash-BQ1O-AfY.js","assets/js/icon-close-BUGl_M7j.js","assets/js/icon-cog-BFr_Pva7.js","assets/js/icon-skip-BOkC5L0N.js","assets/js/icon-down-BiHbKN-t.js","assets/js/icon-edit-CixeXNYx.js","assets/js/icon-error-state-BKQhfBCj.js","assets/js/icon-heart-v5O7C6eS.js","assets/js/icon-key-BPNRipb3.js","assets/js/icon-next-B4hjdiAA.js","assets/js/icon-photo-BrwqV1T0.js","assets/js/icon-pin-BHeOuzvO.js","assets/js/icon-plus-D4YOesIc.js","assets/js/icon-profile-B_XWyuTb.js","assets/js/icon-x-qUCmf2CW.js","assets/js/icon-skip-intro-BUi8b3Ak.js","assets/js/icon-tooltip-CN09iXOB.js","assets/js/icon-visible-on-CM3kpcFN.js","assets/js/icon-x-caret-half-CZtcH_PM.js","assets/js/tasks-completed-Dg2z75km.js","assets/js/add-COIuonao.js","assets/js/google-DKPAcOmk.js","assets/js/arrow-up-1QPpu78M.js","assets/js/square-check-DwLT60gj.js","assets/js/clocks-DjzskNOU.js","assets/js/close-Bj_A2br_.js","assets/js/search-DCqlmJx6.js","assets/js/folder-CwWTWsnJ.js","assets/js/switch-EuBTQVVE.js","assets/js/focus-mode-09pIyYAW.js","assets/js/storage-YYEO5TB5.js","assets/js/icon-confetti-Dz2LojDe.js","assets/js/ocean-bubbles-GcKjBI5B.js","assets/js/sparks-CAw9b6ob.js","assets/js/secure-B8YP-AML.js","assets/js/icon-asana-Csd73e1k.js","assets/js/icon-percent-schedule-CA5EI9b7.js","assets/js/icon-trello-DhCq-Fsi.js","assets/js/icon-clean-rFsPxTtp.js","assets/js/icon-more-lists-Cl9oRGK2.js","assets/js/icon-more-fonts-CcfOY0t4.js","assets/js/icon-focus-stats-keERwXFt.js","assets/js/icon-top-of-mind-B6EhbCcK.js","assets/js/icon-flow-5QqmGIWX.js","assets/js/icon-integrations-D9o58ob4.js","assets/js/icon-weather-extra-ufLpT_SX.js","assets/js/icon-spiral-gh4hwZDD.js","assets/js/icon-happy-place-D1z6CJgM.js","assets/js/icon-time-sensitive-CP2L3maw.js","assets/js/icon-hourly-CdMmiQZT.js","assets/js/icon-infinity-D4yMRoAd.js","assets/js/icon-personalize-photos-D2M4lLlt.js","assets/js/icon-skip-2bGCAGKt.js","assets/js/icon-photo-match-C2EChNEK.js","assets/js/icon-random-375DbcwF.js","assets/js/icon-timezones-DGZoTtaT.js","assets/js/icon-simplify-BRUtLJYp.js","assets/js/icon-sync-DIH26Y9h.js","assets/css/BaseIcon-BlT7Qz-y.css","assets/js/BaseDropdownOption-BV1-F7-m.js","assets/css/BaseDropdownOption-DAuhx1rJ.css","assets/js/focusModeInsightsViewState-CZJTyf3n.js","assets/js/ViewState-lXKIKVsa.js","assets/js/index-DgGUECrr.js","assets/js/main-CWen-4ha.js","assets/css/index-C0DDMXTO.css","assets/js/reactiveCustomization-BIBQ0lmK.js","assets/js/VueBase-Qr0J4kll.js","assets/js/index-CJJH83pl.js","assets/js/pomodoroCompleted-DPMAO4eq.js","assets/js/PomodoroTimers-BWkB-14p.js","assets/js/loginHelpers-CfKnwmAb.js","assets/js/authService-DyVsAij2.js","assets/js/customization-D19fk4LU.js","assets/js/internalDataMetrics-CaeWIKxg.js","assets/js/BaseForm-3qFIEikL.js","assets/js/FormMessage-CVICC9SQ.js","assets/css/FormMessage-BcXv0ZVT.css","assets/css/BaseForm-DwNF5tZp.css","assets/js/AppConfirmCancel-CW0yMYgA.js","assets/css/AppConfirmCancel-DUrPhER4.css","assets/js/FormToggle-DrOOv6G_.js","assets/js/ToggleSwitch-Bn49LxYD.js","assets/css/ToggleSwitch-oT7iqKNg.css","assets/css/FormToggle-Su4QbVrb.css","assets/js/FormInput-DEDReBMA.js","assets/js/SoftFocus-BUhesXB-.js","assets/js/compareObjects-BF7sSNEf.js","assets/css/FocusModeInsightsApp-CDKc3FnU.css","assets/js/LegacyAppPopup-iGUuizX1.js","assets/css/LegacyAppPopup-NyrXRcg8.css"])))=>i.map(i=>d[i]);
import{_ as t}from"./preload-helper-DmNsytk6.js";import{a as e}from"./allComponentsMounted-C3UsG_cA.js";import{q as s,n as i,A as a,ai as o,r,aj as c,e as n,c as l}from"./icon-alert-BG5stABd.js";import{g as p,x as d,a as u}from"./index-DgGUECrr.js";import{_ as h}from"./icon-confetti-Dz2LojDe.js";import{u as g}from"./internalDataMetrics-CaeWIKxg.js";import{g as f}from"./focusModeHelpers-g0L8k_eK.js";import{a as v}from"./appToggleMixin-IV4cErk-.js";import{u as C}from"./focusModeInsightsViewState-CZJTyf3n.js";import{s as w}from"./showAnyway-Bzx3y1TR.js";import{c as y}from"./reactiveCustomization-BIBQ0lmK.js";import{_ as M}from"./add-COIuonao.js";import{_}from"./icon-hide-NFfBhfBx.js";const A=s({name:"CircleIndicator",props:{progress:{type:Number,required:!0}},setup:()=>({svgCircleStrokePath:"M 50, 50 m -40, 0 a 40,40 0 1,0 80,0 a 40,40 0 1,0 -80,0",svgCirclePathCircumference:40*Math.PI*2})});const b=i(s({name:"FocusModeMetric",components:{FocusModeInsightsApp:()=>t((()=>import("./FocusModeInsightsApp-Da48LGTy.js")),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122])),CircleIndicator:i(A,(function(){var t=this,e=t._self._c;return t._self._setupProxy,e("svg",{staticClass:"circle-indicator",attrs:{width:"18",height:"18",viewBox:"0 0 100 100"}},[t.progress<1?[e("path",{attrs:{"stroke-dasharray":t.svgCirclePathCircumference,d:t.svgCircleStrokePath,stroke:"#ffffff50","stroke-width":"20","stroke-linecap":"round",fill:"transparent"}}),e("path",{staticClass:"circle-path",attrs:{"stroke-dasharray":t.progress*t.svgCirclePathCircumference+" "+t.svgCirclePathCircumference,d:t.svgCircleStrokePath,stroke:"white","stroke-width":"20","stroke-linecap":"round",fill:"transparent"}})]:[e("circle",{attrs:{cx:"50",cy:"50",r:"50",fill:"#ffffff50"}}),e("path",{attrs:{d:"M36.897 70.407C37.1789 70.7963 37.502 71.1632 37.8661 71.5011C40.8548 74.2747 45.4718 74.0437 48.1785 70.9851L76.4306 39.0608C79.1373 36.0022 78.9088 31.2743 75.9202 28.5008C72.9315 25.7272 68.3144 25.9582 65.6077 29.0168L44.2451 53.1561C43.4692 54.0328 42.1179 54.0328 41.3421 53.1561L34.3921 45.3028C31.6854 42.2442 27.0683 42.0132 24.0797 44.7868C21.091 47.5604 20.8625 52.2883 23.5692 55.3468L36.897 70.407Z",fill:"white"}})]],2)}),[],!1,null,"67c35cad").exports},mixins:[v({useViewStateStore:C,analytics:new a({feature:"focus-mode-insights"})})],setup:()=>({internalDataMetrics:g()}),computed:{timeFocusedFriendlyStringMetric(){return this.internalDataMetrics.getMetric("pomodoroStats","today")},timeFocusedFriendlyString(){return this.timeFocusedFriendlyStringMetric.value.getterValue||"-"},goalDays(){return this.settings.goalDays},goalEnabled(){return this.settings.goalEnabled},goalMinutes(){return this.settings.goalMinutes},todayMinutesMetric(){return this.internalDataMetrics.getMetric("pomodoroStats","todayMinutes")},indicatorProgress(){if(null===this.todayMinutesMetric.value.getterValue||!this.todayMinutesMetric.value.storeLoaded)return 0;const t=this.todayMinutesMetric.value.getterValue;return Math.max(Math.min(t,this.goalMinutes),0)/this.goalMinutes},circleIndicatorVisible(){return!!this.goalEnabled&&this.goalDays.includes(o())},label:()=>"Focused Today",canShowNotification(){return 1===this.indicatorProgress&&r.tabVisible&&this.circleIndicatorVisible&&p.currentValue},settings:()=>f()},watch:{async canShowNotification(t){if(!t)return;const e=localStorage.getItem(d);e&&c(new Date(Number(e)))===c(new Date)||(this.setLastShowDateIfCompleted(),n.$emit("flashMessage",{message:"Focus Goal completed!",icon:h,persist:5e3,confetti:!0}))},goalMinutes(t,e){e>0&&t>0&&t!==e&&1!==this.indicatorProgress&&localStorage.removeItem(d)}},mounted(){m.on("focusInsights:toggle",this.togglePopup),m.on("focusMode:starting",this.setLastShowDateIfCompleted)},destroyed(){m.off("focusInsights:toggle",this.togglePopup),m.off("focusMode:starting",this.setLastShowDateIfCompleted)},methods:{setLastShowDateIfCompleted(){1===this.indicatorProgress&&localStorage.setItem(d,`${Date.now()}`)},triggerAppOpenEvent(){m.trigger("focusInsightsApp:opened")},triggerAppCloseEvent(){m.trigger("focusInsightsApp:closed")}}}),(function(){var t=this,e=t._self._c;return t._self._setupProxy,e("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:t.closePopup,expression:"closePopup"}],staticClass:"metric-type app-dash add-shadow focus-mode-metric"},[e("div",{staticClass:"metric-item hover-label-parent",attrs:{"data-test":"focus-mode-insight"},on:{click:t.togglePopupAndCaptureIfOpen}},[e("div",{staticClass:"metric-stat"},[t.circleIndicatorVisible?e("circle-indicator",{attrs:{progress:t.indicatorProgress,"data-test":"circle-indicator-svg","data-circle-progress":t.indicatorProgress}}):t._e(),e("span",{attrs:{"data-test":"time-focused-string"}},[t._v(t._s(t.timeFocusedFriendlyString))])],1),e("div",{staticClass:"metric-label"},[e("span",{staticClass:"metric-label-name",attrs:{"data-test":"insight-metric-label"}},[t._v(t._s(t.label))])])]),e("transition",{attrs:{name:"slide-down-fade"},on:{"after-enter":t.triggerAppOpenEvent,"after-leave":t.triggerAppCloseEvent}},[t.popupActive?e("focus-mode-insights-app",{on:{close:t.togglePopupAndCaptureIfOpen}}):t._e()],1)],1)}),[],!1,null,"94e94dce").exports,I=new a({feature:"meta add"});const P=i({name:"AddMetric",components:{AppPopup:()=>t((()=>import("./LegacyAppPopup-iGUuizX1.js")),__vite__mapDeps([123,6,1,2,3,4,124])),FocusModeMetric:b},mixins:[e],props:{disable:{type:Boolean,default:!1},collections:{type:Object,required:!0},standalone:{type:Boolean,default:!1}},setup:()=>({showAnyway:w}),data:()=>({popupActive:!1}),computed:{nippleClass(){return this.openToRight?"nipple-top-left":"nipple-top-right"},focused:{get:()=>u.isOnTop("addMetric"),set(t){t?u.add("addMetric"):u.remove("addMetric")}},focusModeInsightVisible(){return y.focusInsightVisible&&!this.$plus&&!l()}},created(){this.standalone&&(this.widgetId="addMetric"),m.on("globalEvent:esc",this.closeApp)},destroyed(){m.off("globalEvent:esc",this.closeApp)},methods:{add(t){this.$plus?(this.closeApp(),this.$emit("add",t.nameLCP)):t.upsellId&&this.showUpsell(t.upsellId),m.trigger("notification:dismiss")},toggleApp(){this.popupActive?this.closeApp():this.showApp()},showApp(){if(this.disable)return;this.openToRight=!1,I.capture("meta add click"),this.popupActive=!0;const t=document.querySelector(".popup:not(.app)");t&&(t.style.display="none"),this.focused=!0},closeApp(){if(!this.popupActive)return;this.popupActive=!1;const t=document.querySelector(".popup");t&&(t.style.display="block"),this.focused=!1},showUpsell(t){m.cmd("modal.open",t,{eventSource:"dash"})}}},(function(){var t=this,e=t._self._c;return e("div",{staticClass:"app-container add-metric needs-hover",class:{active:t.popupActive,"show-anyway":t.showAnyway.includes("add-metric")},attrs:{"data-show-anyway":"add-metric"}},[e("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:t.closeApp,expression:"closeApp"}],staticClass:"relative"},[e("div",{staticClass:"app-dash metric-item add-shadow",attrs:{"data-ob":"add-metric","data-test":"add-metric-dash"},on:{click:t.toggleApp}},[e("div",{staticClass:"metric-stat"},[e("span",{staticClass:"placeholder"},[e("span",{staticClass:"hide"},[t._v("a")]),e("inline-svg",{staticClass:"icon icon-add",attrs:{src:M}})],1)]),t._m(0)]),e("transition",{attrs:{name:"slide-down-fade"}},[t.popupActive?e("app-popup",{attrs:{position:"bottom-left",width:420,region:"top-right",focused:t.focused},nativeOn:{click:function(e){t.focused=!0}}},[[e("div",{staticClass:"title-wrapper"},[e("div",{staticClass:"title"},[t._v("Add metric")]),e("div",{staticClass:"description"},[t._v("Keep track of important info.")])]),e("div",{staticClass:"tiles"},t._l(t.collections,(function(s){return e("div",{key:s.nameLCP,staticClass:"tile",attrs:{"data-test":"add-"+s.nameLCS},on:{click:function(e){return t.add(s)}}},[e("inline-svg",{staticClass:"icon widget-icon",class:"icon-"+s.nameLCP,attrs:{src:s.icon}}),e("div",{staticClass:"widget-name"},[t._v(t._s(s.fullNameCS))]),t.$plus?t._e():e("span",{staticClass:"badge badge-plus"},[t._v("Plus")])],1)})),0),t.$touch?e("span",{staticClass:"mobile-close",on:{click:t.closeApp}},[e("span",{staticClass:"icon-wrapper u--mobile-show-bg hide"},[e("inline-svg",{staticClass:"icon icon-hide",attrs:{src:_}})],1)]):t._e()]],2):t._e()],1)],1),e("transition",{attrs:{name:"fade"}},[t.focusModeInsightVisible?e("focus-mode-metric",{key:"focus-mode-insight"}):t._e()],1)],1)}),[function(){var t=this._self._c;return t("div",{staticClass:"metric-label"},[t("span",{staticClass:"metric-label-name"},[this._v("Add")])])}],!1,null,"6f60019d").exports;export{P as A,b as F};